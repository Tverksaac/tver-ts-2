исрпавить thread в compound_effects, OnStart может вызываться два раза если не yields.
при измении state CompoundEffectа изменения будут реплицироваться клиенту
подумать на счёт получение конструкторов эффектов +- done